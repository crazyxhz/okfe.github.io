(window.webpackJsonp=window.webpackJsonp||[]).push([[6,10,11,13,19,20,26,28,29,32],{159:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),l=function(e){return!!/本周问题\/故障|本周问题|问题|故障|Online issue/.test(e)};t.default=function(e){var t=e.level,n=e.children,a=(n.length?n[0].props:{}).value,i=void 0===a?"":a,c=function(e){var t=/[:：]$/g,n=o.default.get("isEnglish");return t.test(e)?e.replace(t,n?":":"："):e.replace(/$/,n?":":"：")}(i),s=o.default.get("isEnglish");return 1===t?r.a.createElement("div",{className:l(i)?"template-alarm-title-level-1":"template-title-level-1"},c):2===t?r.a.createElement("div",{className:"template-title-level-2"},c):r.a.createElement("h3",null,n[0],s?":":"：")}},160:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10);t.default=function(e){var t=e.children;return r.a.createElement("div",null,t.map((function(e,t,n){var a=(e.props.children.length>0?e.props.children[0].props:{}).value,l=function(e,t,n){var a=o.default.get("isEnglish"),r=e.replace(/^/,"".concat(t).concat(a?". ":"、")),l=/[;；.。]*$/,i=a?".":"；",c=a?".":"。";return e?r=l.test(e)?r.replace(l,t<n?i:c):r.replace(/$/,t<n?i:c):r}(void 0===a?"":a,t+1,n.length);return r.a.createElement(r.a.Fragment,{key:"".concat(e.key,"-frgm")},r.a.createElement("div",{key:e.key},l),t===n.length-1?r.a.createElement("br",null):null)})))}},265:function(e,t,n){var a=n(282);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(29)(a,r);a.locals&&(e.exports=a.locals)},267:function(e,t,n){var a=n(284);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(29)(a,r);a.locals&&(e.exports=a.locals)},268:function(e,t,n){var a=n(286);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(29)(a,r);a.locals&&(e.exports=a.locals)},273:function(e,t,n){var a=n(331);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(29)(a,r);a.locals&&(e.exports=a.locals)},282:function(e,t,n){(e.exports=n(28)(!1)).push([e.i,".react-markdown {\n  padding: 20px;\n  background-color: #FFF;\n  color: #000;\n  border: none;\n  overflow-y: scroll;\n  box-sizing: border-box;\n  height: 100%;\n}\n.react-markdown .template-title-level-1 {\n  font-size: 18px;\n  font-weight: bold;\n  color: #0070C0;\n}\n.react-markdown .template-title-level-2 {\n  font-size: 14px;\n  font-weight: bold;\n}\n.react-markdown .template-alarm-title-level-1 {\n  font-size: 18px !important;\n  font-weight: bold !important;\n  color: #FF0000 !important;\n}\n.react-markdown div {\n  line-height: 1.75;\n}\n.react-markdown h1,\n.react-markdown h2,\n.react-markdown ul,\n.react-markdown li {\n  margin: 0;\n  padding: 0;\n}\n.react-markdown h1 {\n  font-size: 18px;\n  color: #0070C0;\n  font-weight: bold;\n  white-space: pre-wrap;\n}\n.react-markdown h2 {\n  font-size: 14px;\n  color: #000;\n  font-weight: bold;\n}\n.react-markdown ul {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\n.react-markdown code,\n.react-markdown li code {\n  background-color: #DCDCDC;\n  padding: 4px;\n}\n.react-markdown pre {\n  background: #1E1E1E;\n  padding: 10px;\n}\n.react-markdown pre code {\n  background-color: transparent;\n  color: #DCDCDC;\n}\n",""])},284:function(e,t,n){(e.exports=n(28)(!1)).push([e.i,".markdown-editor-wrap {\n  flex: 1;\n  max-width: 50%;\n}\n.markdown-editor-wrap .react-codemirror2 {\n  height: 100%;\n}\n.markdown-editor-wrap .react-codemirror2 .CodeMirror.cm-s-material {\n  height: 100%;\n}\n",""])},286:function(e,t,n){(e.exports=n(28)(!1)).push([e.i,".copy-weekly-preview {\n  position: relative;\n  flex: 1;\n}\n.copy-weekly-preview .copy-wrap {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  color: #0070C0;\n}\n",""])},331:function(e,t,n){(e.exports=n(28)(!1)).push([e.i,".highlight-title {\n  background-color: cornflowerblue;\n}\n.markdown-weekly-wrap {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n.markdown-weekly-wrap .tool-bar {\n  margin-bottom: 10px;\n}\n.markdown-weekly-wrap .tool-bar .tool-item:not(:first-child) {\n  margin-left: 10px;\n}\n.markdown-weekly-wrap .divider {\n  width: 10px;\n  background: #AAA;\n  cursor: pointer;\n}\n.markdown-weekly-wrap .weekly-flex-wrap {\n  flex: 1;\n  height: 100%;\n}\n",""])},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(293),l=n.n(o),i=n(159),c=n(160);n(265);t.default=function(e){var t=e.source,n=e.className,a=void 0===n?"":n;return r.a.createElement("div",{className:"react-markdown ".concat(a)},r.a.createElement(l.a,{source:t,renderers:{heading:i.default,list:c.default}}))}},56:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var a=n(0),r=n.n(a),o=n(299);n(267);function l(e){var t=e.value,n=e.onBeforeChange,a=e.className,l=void 0===a?"":a;return r.a.createElement("div",{className:"markdown-editor-wrap ".concat(l)},r.a.createElement(o.Controlled,{value:t,options:{theme:"material",lineNumbers:!0},onBeforeChange:n}))}n(300),n(301),n(302),n(303),n(304)},57:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));n(126);var a=n(9),r=n(17),o=n.n(r),l=n(21),i=n.n(l),c=n(51),s=n.n(c),u=n(52),d=n.n(u),p=n(53),m=n.n(p),f=n(0),h=n.n(f),v=n(54),g=n(37),w=(n(268),function(e){function t(e){var n;return o()(this,t),(n=s()(this,d()(t).call(this,e))).copyRef=h.a.createRef(),n}return m()(t,e),i()(t,[{key:"copyText",value:function(){var e=document.querySelector(".weekly-preview-text"),t=document.createRange();t.selectNode(e);var n=window.getSelection();n.rangeCount>0&&n.removeAllRanges(),n.addRange(t),document.execCommand("copy"),Object(g.globalMessage)("success","复制成功！")}},{key:"render",value:function(){var e=this.props,t=e.source,n=e.className,r=void 0===n?"":n,o=e.copyTips,l=void 0===o?null:o,i=e.style,c=void 0===i?{}:i;return(h.a.createElement("div",{className:"copy-weekly-preview ".concat(r),style:c,ref:this.copyRef,onClick:this.copyText},null===l?h.a.createElement("div",{className:"copy-wrap"},"点击空白处复制 ",h.a.createElement(a.a,{type:"copy"})):l,h.a.createElement(v.default,{className:"weekly-preview-text",source:t})))}}]),t}(h.a.PureComponent))},63:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return D}));n(344);var a,r,o=n(352),l=(n(161),n(84)),i=(n(165),n(136)),c=(n(346),n(354)),s=(n(291),n(290)),u=(n(158),n(98)),d=(n(345),n(353)),p=n(17),m=n.n(p),f=n(21),h=n.n(f),v=n(51),g=n.n(v),w=n(52),k=n.n(w),y=n(53),x=n.n(y),E=n(0),b=n.n(E),C=n(31),N=n(127),T=n(57),S=n(56),B=n(26),V=(n(273),n(347)),M=n(278),O=n(10),I=B.default.MarkdownTypeEnum,A=I.common,j=I.tl,z=I.demo,D=(a=Object(N.b)("markdownStore"),Object(C.f)(r=a(r=Object(N.c)(r=function(e){function t(){var e,n;m()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=g()(this,(e=k()(t)).call.apply(e,[this].concat(r)))).toSample=function(){n.props.history.push("/sample")},n.state={openEdit:!1,currentType:O.default.get("currentType")||"mdText",editValue:JSON.parse(localStorage.getItem("user")||"[]").join("\n"),previewVisible:!0,currentUser:0,users:JSON.parse(localStorage.getItem("user")||"[]")},n}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this,t=this.state.previewVisible,n=this.props.markdownStore,a=n.markdownType,r=n[a];return b.a.createElement("div",{className:"markdown-weekly-wrap"},b.a.createElement("div",{className:"flex flex-justify-center"},b.a.createElement(d.a.Group,{value:this.state.currentType,buttonStyle:"outline",onChange:function(t){var a=t.target.value;e.setState({currentType:a}),n.updateMarkdownType(a)}},b.a.createElement(d.a.Button,{value:A},"个人模板"),b.a.createElement(d.a.Button,{value:j},"TL 模板"),b.a.createElement(d.a.Button,{value:z},"示例模板"))),b.a.createElement("div",{className:"flex tool-bar"},b.a.createElement(s.a,{title:"当前操作将清除所有已写内容，确认继续？",onConfirm:n.clearWeekly,okText:"确认",cancelText:"取消"},b.a.createElement(u.a,{className:"tool-item clear-btn",type:"danger"},"初始化")),b.a.createElement(c.a,{defaultChecked:O.default.get("isEnglish"),style:{alignItems:"center",display:"flex",marginLeft:20},onChange:function(e){O.default.set("isEnglish",e.target.checked)}},"English Mode"),this.state.currentType===j&&b.a.createElement(d.a.Group,{style:{marginLeft:20},value:this.state.currentUser,onChange:function(t){console.log(t),e.setState({currentUser:t.target.value})}},b.a.createElement(d.a.Button,{value:0},"无"),this.state.users.map((function(e){return b.a.createElement(d.a.Button,{key:e,value:e},e)}))),this.state.currentType===j&&b.a.createElement(u.a,{className:"tool-item clear-btn",type:"link",onClick:function(){e.setState({openEdit:!0})}},b.a.createElement(M.a,{type:V.a}),"编辑"),b.a.createElement(o.a,{title:"Basic Modal",visible:this.state.openEdit,onOk:function(){try{var t=e.state.editValue.split("\n").filter(Boolean);localStorage.setItem("user",JSON.stringify(t)),e.setState({openEdit:!1,users:t})}catch(e){console.log(e),i.a.error("错误的格式")}},onCancel:function(){return e.setState({openEdit:!1})}},b.a.createElement(l.a.TextArea,{placeholder:"输入组员姓名，每人一行",rows:4,value:this.state.editValue,onChange:function(t){e.setState({editValue:t.target.value})}}))),b.a.createElement("div",{className:"flex weekly-flex-wrap"},b.a.createElement(S.default,{className:"markdown-editor",value:r,onBeforeChange:function(t,a,r){console.log(a),"paste"===a.origin&&a.update(null,null,function(e,t){console.log(t),0!==e.from.ch||e.text[0].startsWith("#")||e.text[0].match(/^\d/)||e.text[0].startsWith("- ")||(e.text[0]="## ".concat(e.text[0]));return e.text.forEach((function(n,a){var r=!1;["，","。","；"].includes(e.text[a][e.text[a].length-1])&&(r=!0),n.match(/^\d\d?(、|. )/)&&(e.text[a]="".concat(r?n.replace(/^\d\d?(、|. )/,"- ").slice(0,-1):n.replace(/^\d\d?(、|. )/,"- ")).concat(t?" @".concat(t):"")),!e.text[a].includes(t)&&t&&e.text[a].length>3&&!e.text[a].startsWith("## ")&&(e.text[a]="".concat(r?e.text[a].slice(0,-1):e.text[a]).concat(t?" @".concat(t):""))})),e.text}(a,e.state.currentUser)),setTimeout((function(){n.updateMdText(t.getValue()),setTimeout((function(){!function(e){var t=[];e.split("\n").forEach((function(e,n){e.trim().startsWith("# ")&&t.push(n)}));var n=document.querySelector("#root div.CodeMirror-code").children;n&&Array.from(n).forEach((function(e,n){t.includes(n)?e.classList.contains("highlight-title")||e.classList.add("highlight-title"):e.classList.remove("highlight-title")}))}(t.getValue())}),500),"paste"===a.origin&&t.setCursor({line:a.from.line+a.text.length-1,ch:11111})}),10),n.updateMdText(r)}}),b.a.createElement("div",{className:"divider",role:"button",title:t?"点击折叠预览面板":"点击展开预览面板",onClick:function(){e.setState((function(e){return{previewVisible:!e.previewVisible}}))}}),b.a.createElement(T.default,{className:"markdown-preview",source:r,style:{display:t?"block":"none"}})))}}]),t}(b.a.Component))||r)||r)||r)}}]);